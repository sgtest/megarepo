Auto generated patch. Do not edit or delete it, even if empty.
diff -ruN --strip-trailing-cr a/mlir/lib/Dialect/SparseTensor/Transforms/Utils/LoopEmitter.cpp b/mlir/lib/Dialect/SparseTensor/Transforms/Utils/LoopEmitter.cpp
--- a/mlir/lib/Dialect/SparseTensor/Transforms/Utils/LoopEmitter.cpp
+++ b/mlir/lib/Dialect/SparseTensor/Transforms/Utils/LoopEmitter.cpp
@@ -599,7 +599,7 @@
 
   // NOTE: we can also prepare for next dim here in advance
   // Pushes the loop into stack.
-  loopStack.emplace_back(tidLvls, l, builder.getInsertionBlock(), iv, loopTag);
+  loopStack.emplace_back(tls, l, builder.getInsertionBlock(), iv, loopTag);
   return l;
 }
 
diff -ruN --strip-trailing-cr a/mlir/test/Integration/Dialect/SparseTensor/CPU/reshape_dot.mlir b/mlir/test/Integration/Dialect/SparseTensor/CPU/reshape_dot.mlir
--- a/mlir/test/Integration/Dialect/SparseTensor/CPU/reshape_dot.mlir
+++ b/mlir/test/Integration/Dialect/SparseTensor/CPU/reshape_dot.mlir
@@ -17,8 +17,6 @@
 // DEFINE: %{env} =
 //--------------------------------------------------------------------------------------------------
 
-// UNSUPPORTED: target={{.*}}
-
 // RUN: %{compile} | %{env} %{run} | FileCheck %s
 //
 // Do the same run, but now with direct IR generation.
diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/libc/BUILD.bazel b/utils/bazel/llvm-project-overlay/libc/BUILD.bazel
--- a/utils/bazel/llvm-project-overlay/libc/BUILD.bazel
+++ b/utils/bazel/llvm-project-overlay/libc/BUILD.bazel
@@ -210,6 +210,7 @@
     deps = [
         "__support_cpp_type_traits",
         "__support_macros_attributes",
+        ":llvm_libc_macros_limits_macros",
     ],
 )
 
@@ -591,6 +592,7 @@
     name = "__support_math_extras",
     hdrs = ["src/__support/math_extras.h"],
     deps = [
+        ":__support_cpp_limits",
         ":__support_cpp_type_traits",
         ":__support_macros_attributes",
         ":__support_macros_config",
@@ -708,6 +710,7 @@
     deps = [
         ":__support_common",
         ":__support_cpp_bit",
+        ":__support_cpp_limits",
         ":__support_cpp_type_traits",
         ":__support_fputil_fp_bits",
         ":__support_fputil_nearest_integer_operations",
@@ -955,6 +958,11 @@
     ],
 )
 
+libc_support_library(
+    name = "llvm_libc_macros_limits_macros",
+    hdrs = ["include/llvm-libc-macros/limits-macros.h"],
+)
+
 ############################### errno targets ################################
 
 libc_function(
diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/libc/test/src/math/BUILD.bazel b/utils/bazel/llvm-project-overlay/libc/test/src/math/BUILD.bazel
--- a/utils/bazel/llvm-project-overlay/libc/test/src/math/BUILD.bazel
+++ b/utils/bazel/llvm-project-overlay/libc/test/src/math/BUILD.bazel
@@ -293,6 +293,7 @@
     name = "ilogb_test_template",
     hdrs = ["ILogbTest.h"],
     deps = [
+        "//libc:__support_cpp_limits",
         "//libc:__support_fputil_fp_bits",
         "//libc:__support_fputil_manipulation_functions",
         "//libc/test/UnitTest:LibcUnitTest",
@@ -345,6 +346,7 @@
     name = "ldexp_test_template",
     hdrs = ["LdExpTest.h"],
     deps = [
+        "//libc:__support_cpp_limits",
         "//libc:__support_fputil_fp_bits",
         "//libc:__support_fputil_normal_float",
         "//libc/test/UnitTest:LibcUnitTest",
@@ -783,6 +785,7 @@
         "LdExpTest.h",
         "ScalbnTest.h",
     ],
+    deps = ["//libc:__support_cpp_limits"],
 )
 
 math_test(
@@ -791,6 +794,7 @@
         "LdExpTest.h",
         "ScalbnTest.h",
     ],
+    deps = ["//libc:__support_cpp_limits"],
 )
 
 math_test(
@@ -799,4 +803,5 @@
         "LdExpTest.h",
         "ScalbnTest.h",
     ],
+    deps = ["//libc:__support_cpp_limits"],
 )
diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/libc/test/src/stdlib/BUILD.bazel b/utils/bazel/llvm-project-overlay/libc/test/src/stdlib/BUILD.bazel
--- a/utils/bazel/llvm-project-overlay/libc/test/src/stdlib/BUILD.bazel
+++ b/utils/bazel/llvm-project-overlay/libc/test/src/stdlib/BUILD.bazel
@@ -60,6 +60,7 @@
     name = "atoi_test_helper",
     hdrs = ["AtoiTest.h"],
     deps = [
+        "//libc:__support_cpp_limits",
         "//libc:__support_cpp_type_traits",
         "//libc/test/UnitTest:LibcUnitTest",
     ],
diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/libc/utils/MPFRWrapper/BUILD.bazel b/utils/bazel/llvm-project-overlay/libc/utils/MPFRWrapper/BUILD.bazel
--- a/utils/bazel/llvm-project-overlay/libc/utils/MPFRWrapper/BUILD.bazel
+++ b/utils/bazel/llvm-project-overlay/libc/utils/MPFRWrapper/BUILD.bazel
@@ -47,6 +47,7 @@
         "//libc:__support_fputil_fp_bits",
         "//libc:__support_fputil_fpbits_str",
         "//libc/test/UnitTest:fp_test_helpers",
+        "//libc/test/UnitTest:LibcUnitTest",
         "//libc/utils/MPFRWrapper:mpfr_impl",
     ],
 )

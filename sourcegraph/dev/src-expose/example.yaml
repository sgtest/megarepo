# dir is the directory precommand is run from. If a snapshot's dir is
# relative, it will be resolved relative to this directory. Defaults to PWD.
dir: /data/code
# If a Snapshot's destination is relative, it will be resolved relative to
# destination. Defaults to ~/.sourcegraph/snapshots
destination: /data/snapshots
# precommand is run before any snapshots are taken. precommand is run from
# dir.
precommand: p4 sync
# dirmode defines what behaviour to use if Dir is missing.
# 
#  - fail (default)
#  - ignore
#  - remove_dest
dirmode: fail
# duration defines how often snapshots should be taken. Defaults to 10s.
duration: 10s
# snapshots is a list of snapshosts to take.
snapshots:
- dir: ./my-project # dir is relative to the top-level dir (/data/code)
- dir: ./my-old-project
   # minduration if specified will only sync the directory at most this
   # often. Useful for directories which will rarely change.
  minduration: 1h
- dir: ./deeply/nested/project
  # precommand is run from dir. Allows you to run an extra command for a
  # specific dir.
  precommand: cp ~/my-gitignore .gitignore
  # destination is relative to top-level destination (/data/snapshots). By
  # default it is the same as dir.
  destination: ./nested-project
- dir: ./other-project

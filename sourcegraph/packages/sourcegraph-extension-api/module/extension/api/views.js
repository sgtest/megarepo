import { ProviderMap } from './common';
/**
 * @internal
 */
class ExtPanelView {
    constructor(proxy, id, subscription) {
        this.proxy = proxy;
        this.id = id;
        this.subscription = subscription;
        this._title = '';
        this._content = '';
    }
    get title() {
        return this._title;
    }
    set title(value) {
        this._title = value;
        this.proxy.$acceptPanelViewUpdate(this.id, { title: value });
    }
    get content() {
        return this._content;
    }
    set content(value) {
        this._content = value;
        this.proxy.$acceptPanelViewUpdate(this.id, { content: value });
    }
    unsubscribe() {
        return this.subscription.unsubscribe();
    }
}
/** @internal */
export class ExtViews {
    constructor(proxy) {
        this.proxy = proxy;
        this.registrations = new ProviderMap(id => this.proxy.$unregister(id));
    }
    createPanelView(id) {
        const { id: regID, subscription } = this.registrations.add({});
        this.proxy.$registerPanelViewProvider(regID, { id });
        return new ExtPanelView(this.proxy, regID, subscription);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld3MuanMiLCJzb3VyY2VSb290Ijoic3JjLyIsInNvdXJjZXMiOlsiZXh0ZW5zaW9uL2FwaS92aWV3cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRXRDOztHQUVHO0FBQ0gsTUFBTSxZQUFZO0lBSWQsWUFBb0IsS0FBcUIsRUFBVSxFQUFVLEVBQVUsWUFBNEI7UUFBL0UsVUFBSyxHQUFMLEtBQUssQ0FBZ0I7UUFBVSxPQUFFLEdBQUYsRUFBRSxDQUFRO1FBQVUsaUJBQVksR0FBWixZQUFZLENBQWdCO1FBSDNGLFdBQU0sR0FBRyxFQUFFLENBQUE7UUFDWCxhQUFRLEdBQUcsRUFBRSxDQUFBO0lBRWlGLENBQUM7SUFFdkcsSUFBVyxLQUFLO1FBQ1osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFBO0lBQ3RCLENBQUM7SUFDRCxJQUFXLEtBQUssQ0FBQyxLQUFhO1FBQzFCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFBO1FBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQ2hFLENBQUM7SUFFRCxJQUFXLE9BQU87UUFDZCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUE7SUFDeEIsQ0FBQztJQUNELElBQVcsT0FBTyxDQUFDLEtBQWE7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUE7UUFDckIsSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUE7SUFDbEUsQ0FBQztJQUVNLFdBQVc7UUFDZCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUE7SUFDMUMsQ0FBQztDQUNKO0FBS0QsZ0JBQWdCO0FBQ2hCLE1BQU0sT0FBTyxRQUFRO0lBR2pCLFlBQW9CLEtBQXFCO1FBQXJCLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBRmpDLGtCQUFhLEdBQUcsSUFBSSxXQUFXLENBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBRWpDLENBQUM7SUFFdEMsZUFBZSxDQUFDLEVBQVU7UUFDN0IsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7UUFDOUQsSUFBSSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQ3BELE9BQU8sSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUE7SUFDNUQsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVW5zdWJzY3JpYmFibGUgfSBmcm9tICdyeGpzJ1xuaW1wb3J0ICogYXMgc291cmNlZ3JhcGggZnJvbSAnc291cmNlZ3JhcGgnXG5pbXBvcnQgeyBDbGllbnRWaWV3c0FQSSB9IGZyb20gJy4uLy4uL2NsaWVudC9hcGkvdmlld3MnXG5pbXBvcnQgeyBQcm92aWRlck1hcCB9IGZyb20gJy4vY29tbW9uJ1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBFeHRQYW5lbFZpZXcgaW1wbGVtZW50cyBzb3VyY2VncmFwaC5QYW5lbFZpZXcge1xuICAgIHByaXZhdGUgX3RpdGxlID0gJydcbiAgICBwcml2YXRlIF9jb250ZW50ID0gJydcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJveHk6IENsaWVudFZpZXdzQVBJLCBwcml2YXRlIGlkOiBudW1iZXIsIHByaXZhdGUgc3Vic2NyaXB0aW9uOiBVbnN1YnNjcmliYWJsZSkge31cblxuICAgIHB1YmxpYyBnZXQgdGl0bGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpdGxlXG4gICAgfVxuICAgIHB1YmxpYyBzZXQgdGl0bGUodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl90aXRsZSA9IHZhbHVlXG4gICAgICAgIHRoaXMucHJveHkuJGFjY2VwdFBhbmVsVmlld1VwZGF0ZSh0aGlzLmlkLCB7IHRpdGxlOiB2YWx1ZSB9KVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgY29udGVudCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGVudFxuICAgIH1cbiAgICBwdWJsaWMgc2V0IGNvbnRlbnQodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9jb250ZW50ID0gdmFsdWVcbiAgICAgICAgdGhpcy5wcm94eS4kYWNjZXB0UGFuZWxWaWV3VXBkYXRlKHRoaXMuaWQsIHsgY29udGVudDogdmFsdWUgfSlcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5zdWJzY3JpYmUoKTogdm9pZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXG4gICAgfVxufVxuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgaW50ZXJmYWNlIEV4dFZpZXdzQVBJIHt9XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBFeHRWaWV3cyBpbXBsZW1lbnRzIEV4dFZpZXdzQVBJIHtcbiAgICBwcml2YXRlIHJlZ2lzdHJhdGlvbnMgPSBuZXcgUHJvdmlkZXJNYXA8e30+KGlkID0+IHRoaXMucHJveHkuJHVucmVnaXN0ZXIoaWQpKVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwcm94eTogQ2xpZW50Vmlld3NBUEkpIHt9XG5cbiAgICBwdWJsaWMgY3JlYXRlUGFuZWxWaWV3KGlkOiBzdHJpbmcpOiBFeHRQYW5lbFZpZXcge1xuICAgICAgICBjb25zdCB7IGlkOiByZWdJRCwgc3Vic2NyaXB0aW9uIH0gPSB0aGlzLnJlZ2lzdHJhdGlvbnMuYWRkKHt9KVxuICAgICAgICB0aGlzLnByb3h5LiRyZWdpc3RlclBhbmVsVmlld1Byb3ZpZGVyKHJlZ0lELCB7IGlkIH0pXG4gICAgICAgIHJldHVybiBuZXcgRXh0UGFuZWxWaWV3KHRoaXMucHJveHksIHJlZ0lELCBzdWJzY3JpcHRpb24pXG4gICAgfVxufVxuIl19
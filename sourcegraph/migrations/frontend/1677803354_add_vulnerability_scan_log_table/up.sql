CREATE TABLE IF NOT EXISTS lsif_uploads_vulnerability_scan (
    ID BIGSERIAL PRIMARY KEY,
    upload_id INT NOT NULL,
    last_scanned_at TIMESTAMP NOT NULL DEFAULT NOW(),

    CONSTRAINT fk_upload_id FOREIGN KEY (upload_id) REFERENCES lsif_uploads(id) ON DELETE CASCADE
);

CREATE UNIQUE INDEX IF NOT EXISTS lsif_uploads_vulnerability_scan_upload_id ON lsif_uploads_vulnerability_scan(upload_id);

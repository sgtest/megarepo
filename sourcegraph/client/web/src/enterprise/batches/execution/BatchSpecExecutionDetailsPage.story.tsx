import { storiesOf } from '@storybook/react'
import React from 'react'
import { of } from 'rxjs'

import { BatchSpecExecutionState } from '@sourcegraph/shared/src/graphql/schema'

import { BatchSpecExecutionFields } from '../../../graphql-operations'
import { EnterpriseWebStory } from '../../components/EnterpriseWebStory'

import { BatchSpecExecutionDetailsPage } from './BatchSpecExecutionDetailsPage'

const { add } = storiesOf('web/batches/execution/BatchSpecExecutionDetailsPage', module)
    .addDecorator(story => <div className="p-3 container">{story()}</div>)
    .addParameters({
        chromatic: {
            viewports: [320, 576, 978, 1440],
        },
    })

const inputSpec =
    "name: hello-world\ndescription: Add Hello World to READMEs\n\n# Find all repositories that contain a README.md file.\non:\n  - repositoriesMatchingQuery: file:README.md\n\n# In each repository, run this command. Each repository's resulting diff is captured.\nsteps:\n  - run: echo Hello World | tee -a $(find -name README.md)\n    container: ubuntu:18.04\n\n# Describe the changeset (e.g., GitHub pull request) you want for each repository.\nchangesetTemplate:\n  title: Hello World\n  body: My first batch change!\n  branch: hello-world # Push the commit to this branch.\n  commit:\n    message: Append Hello World to all README.md files\n  published: false\n"

const batchSpecExecutionCompleted = (): BatchSpecExecutionFields => ({
    id: 'QmF0Y2hTcGVjRXhlY3V0aW9uOiI5THpOWlBmUHhKSSI=',
    inputSpec,
    state: BatchSpecExecutionState.COMPLETED,
    createdAt: '2021-08-02T16:01:57Z',
    startedAt: '2021-08-02T16:01:57Z',
    finishedAt: '2021-08-02T16:02:23Z',
    failure: null,
    steps: {
        setup: [
            {
                key: 'setup.firecracker.start',
                command: [
                    'ignite',
                    'run',
                    '--runtime',
                    'docker',
                    '--network-plugin',
                    'docker-bridge',
                    '--cpus',
                    '4',
                    '--memory',
                    '12G',
                    '--size',
                    '20G',
                    '--copy-files',
                    '/tmp/1490824294:/work',
                    '--ssh',
                    '--name',
                    'USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51',
                    'sourcegraph/ignite-ubuntu:insiders',
                ],
                startTime: '2021-08-02T18:01:57+02:00',
                exitCode: 0,
                durationMilliseconds: 6784,
                out:
                    'stdout: time="2021-08-02T18:01:57+02:00" level=info msg="Starting image import..."\nstdout: time="2021-08-02T18:01:59+02:00" level=info msg="Imported OCI image \\"sourcegraph/ignite-ubuntu:insiders\\" (693.6 MB) to base image with UID \\"190f69b8a7fe059d\\""\nstdout: time="2021-08-02T18:02:00+02:00" level=info msg="Created VM with ID \\"7c60f09688abdca1\\" and name \\"USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51\\""\nstdout: time="2021-08-02T18:02:00+02:00" level=info msg="Networking is handled by \\"docker-bridge\\""\nstdout: time="2021-08-02T18:02:00+02:00" level=info msg="Started Firecracker VM \\"7c60f09688abdca1\\" in a container with ID \\"2dc3f3334dab94176aaed5b20e5ecefff383223ff1a63c3f9ea3b53130f18f2e\\""\nstdout: time="2021-08-02T18:02:01+02:00" level=info msg="Waiting for the ssh daemon within the VM to start..."\n',
            },
        ],
        srcPreview: {
            key: 'step.src.0',
            command: [
                'ignite',
                'exec',
                'USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51',
                '--',
                'cd /work && SRC_ENDPOINT=http://USERNAME_REMOVED:PASSWORD_REMOVED@192.168.1.34:3080 SRC_ACCESS_TOKEN=SRC_ACCESS_TOKEN_REMOVED HOME=/home/mrnugget PATH=/home/mrnugget/google-cloud-sdk/bin:/home/mrnugget/bin:/home/mrnugget/.yarn/bin:/home/mrnugget/.config/yarn/global/node_modules/.bin:/usr/local/heroku/bin:/home/mrnugget/code/go/bin:/home/mrnugget/.asdf/shims:/usr/local/opt/asdf/bin:/usr/local/bin:/home/mrnugget/.cargo/bin:/home/mrnugget/.local/bin:/usr/local/sbin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/go/bin:/home/mrnugget/.fzf/bin src batch preview -f spec.yml -text-only -skip-errors -n mrnugget',
            ],
            startTime: '2021-08-02T18:02:04+02:00',
            exitCode: 0,
            durationMilliseconds: 16532,
            out:
                'stdout: {"operation":"PARSING_BATCH_SPEC","timestamp":"2021-08-02T16:02:04.775Z","status":"STARTED"}\nstdout: {"operation":"PARSING_BATCH_SPEC","timestamp":"2021-08-02T16:02:04.776Z","status":"SUCCESS"}\nstdout: {"operation":"RESOLVING_NAMESPACE","timestamp":"2021-08-02T16:02:04.776Z","status":"STARTED"}\nstdout: {"operation":"RESOLVING_NAMESPACE","timestamp":"2021-08-02T16:02:04.78Z","status":"SUCCESS","message":"Namespace: VXNlcjox"}\nstdout: {"operation":"PREPARING_DOCKER_IMAGES","timestamp":"2021-08-02T16:02:04.78Z","status":"STARTED"}\nstdout: {"operation":"PREPARING_DOCKER_IMAGES","timestamp":"2021-08-02T16:02:04.78Z","status":"PROGRESS","message":"0% done"}\nstdout: {"operation":"PREPARING_DOCKER_IMAGES","timestamp":"2021-08-02T16:02:11.777Z","status":"PROGRESS","message":"0% done"}\nstdout: {"operation":"PREPARING_DOCKER_IMAGES","timestamp":"2021-08-02T16:02:11.777Z","status":"PROGRESS","message":"100% done"}\nstdout: {"operation":"PREPARING_DOCKER_IMAGES","timestamp":"2021-08-02T16:02:11.777Z","status":"SUCCESS"}\nstdout: {"operation":"DETERMINING_WORKSPACE_TYPE","timestamp":"2021-08-02T16:02:11.777Z","status":"STARTED"}\nstdout: {"operation":"DETERMINING_WORKSPACE_TYPE","timestamp":"2021-08-02T16:02:11.777Z","status":"SUCCESS","message":"BIND"}\nstdout: {"operation":"RESOLVING_REPOSITORIES","timestamp":"2021-08-02T16:02:11.777Z","status":"STARTED"}\nstdout: {"operation":"RESOLVING_REPOSITORIES","timestamp":"2021-08-02T16:02:11.816Z","status":"SUCCESS","message":"1 unsupported repositories"}\nstdout: {"operation":"DETERMINING_WORKSPACES","timestamp":"2021-08-02T16:02:11.816Z","status":"STARTED"}\nstdout: {"operation":"DETERMINING_WORKSPACES","timestamp":"2021-08-02T16:02:11.817Z","status":"SUCCESS","message":"Found 18 workspaces with steps to execute"}\nstdout: {"operation":"CHECKING_CACHE","timestamp":"2021-08-02T16:02:11.817Z","status":"STARTED"}\nstdout: {"operation":"CHECKING_CACHE","timestamp":"2021-08-02T16:02:11.817Z","status":"SUCCESS","message":"Found 0 cached changeset specs; 18 tasks need to be executed"}\nstdout: {"operation":"EXECUTING_TASKS","timestamp":"2021-08-02T16:02:11.817Z","status":"STARTED","metadata":{"tasks":[{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0},{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}]}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"STARTED","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"STARTED","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.818Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.829Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.835Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.836Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.846Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.847Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.848Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.855Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:11.883Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:12.711Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:12.81Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:12.853Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:12.89Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.445Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.453Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.453Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.454Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.514Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.516Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.516Z","status":"STARTED","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.516Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.526Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.535Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.571Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.574Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.574Z","status":"STARTED","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.574Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.586Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.595Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.621Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.626Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.626Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:13.626Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.27Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.273Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.308Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.793Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.963Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.965Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.965Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.965Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.966Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.97Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.97Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.97Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.982Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:14.991Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.004Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.016Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.149Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.812Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.814Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:15.908Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.486Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.491Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.491Z","status":"STARTED","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.491Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.561Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.636Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.664Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.789Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.794Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.794Z","status":"STARTED","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.794Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.797Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.797Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.798Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.805Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:16.816Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:17.037Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:17.141Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:17.535Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:17.621Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:17.669Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.044Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.061Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.061Z","status":"STARTED","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.061Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.098Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.189Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.248Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.253Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.253Z","status":"STARTED","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.253Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.287Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.334Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.492Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.584Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.781Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.874Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.874Z","status":"STARTED","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.874Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.882Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:18.887Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.02Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.151Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.405Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.413Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.413Z","status":"STARTED","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.413Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.42Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.425Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.597Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.855Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.899Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.908Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.908Z","status":"STARTED","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.908Z","status":"PROGRESS","message":"Downloading archive","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.911Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.919Z","status":"PROGRESS","message":"Initializing workspace","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:19.926Z","status":"PROGRESS","message":"Preparing step 1","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.378Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.38Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.392Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.503Z","status":"PROGRESS","message":"echo Hello World | tee -a $(find -name README.md)","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.879Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.881Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.981Z","status":"PROGRESS","message":"Calculating diff","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASK","timestamp":"2021-08-02T16:02:20.983Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.983Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/zap","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.983Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tiny-go-test-repository","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.983Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-mux","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-websocket","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOURCEGRAPH/jsonrpc2","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/go-diff","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/etcd","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.984Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"bitbucket.sgdev.org/SOUR/vegeta","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/typechecker-in-go","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph/sourcegraph","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorillalabs-sparkling","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/tidb","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"github.com/sourcegraph-testing/titan","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.985Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/sourcegraph/automation-testing","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.986Z","status":"SUCCESS","metadata":{"task":{"Repository":"gitlab.sgdev.org/thorsten/sourcegraph-rewrite-in-x86-asm","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"BUILDING_TASK_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.986Z","status":"SUCCESS","metadata":{"task":{"Repository":"ghe.sgdev.org/sourcegraph/gorilla-sessions","Workspace":"","Steps":[{"run":"echo Hello World | tee -a $(find -name README.md)","container":"ubuntu:18.04","env":{}}],"CachedStepResultsFound":false,"StartStep":0}}}\nstdout: {"operation":"EXECUTING_TASKS","timestamp":"2021-08-02T16:02:20.986Z","status":"SUCCESS"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.986Z","status":"STARTED","message":"Sending 18 changeset specs"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.993Z","status":"PROGRESS","message":"Uploaded 1 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:20.999Z","status":"PROGRESS","message":"Uploaded 2 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.004Z","status":"PROGRESS","message":"Uploaded 3 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.01Z","status":"PROGRESS","message":"Uploaded 4 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.014Z","status":"PROGRESS","message":"Uploaded 5 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.019Z","status":"PROGRESS","message":"Uploaded 6 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.024Z","status":"PROGRESS","message":"Uploaded 7 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.03Z","status":"PROGRESS","message":"Uploaded 8 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.035Z","status":"PROGRESS","message":"Uploaded 9 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.04Z","status":"PROGRESS","message":"Uploaded 10 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.045Z","status":"PROGRESS","message":"Uploaded 11 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.054Z","status":"PROGRESS","message":"Uploaded 12 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.058Z","status":"PROGRESS","message":"Uploaded 13 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.063Z","status":"PROGRESS","message":"Uploaded 14 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.068Z","status":"PROGRESS","message":"Uploaded 15 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.072Z","status":"PROGRESS","message":"Uploaded 16 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.077Z","status":"PROGRESS","message":"Uploaded 17 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.082Z","status":"PROGRESS","message":"Uploaded 18 out of 18"}\nstdout: {"operation":"UPLOADING_CHANGESET_SPECS","timestamp":"2021-08-02T16:02:21.082Z","status":"SUCCESS"}\nstdout: {"operation":"CREATING_BATCH_SPEC","timestamp":"2021-08-02T16:02:21.082Z","status":"STARTED"}\nstdout: {"operation":"CREATING_BATCH_SPEC","timestamp":"2021-08-02T16:02:21.097Z","status":"SUCCESS","message":"http://USERNAME_REMOVED:PASSWORD_REMOVED@192.168.1.34:3080/users/mrnugget/batch-changes/apply/QmF0Y2hTcGVjOiI5NzZxcXAydzBwYyI="}\n',
        },
        teardown: [
            {
                key: 'teardown.firecracker.stop',
                command: ['ignite', 'stop', 'USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51'],
                startTime: '2021-08-02T18:02:21+02:00',
                exitCode: 0,
                durationMilliseconds: 2067,
                out:
                    'stdout: time="2021-08-02T18:02:21+02:00" level=info msg="Removing the container with ID \\"2dc3f3334dab94176aaed5b20e5ecefff383223ff1a63c3f9ea3b53130f18f2e\\" from the \\"docker-bridge\\" network"\nstdout: time="2021-08-02T18:02:23+02:00" level=info msg="Stopped VM with name \\"USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51\\" and ID \\"7c60f09688abdca1\\""\n',
            },
            {
                key: 'teardown.firecracker.remove',
                command: ['ignite', 'rm', '-f', 'USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51'],
                startTime: '2021-08-02T18:02:23+02:00',
                exitCode: 0,
                durationMilliseconds: 71,
                out:
                    'stdout: time="2021-08-02T18:02:23+02:00" level=info msg="Removed VM with name \\"USERNAME_REMOVED-c70e5459-a30d-43fe-ae6e-7a17b3adec51\\" and ID \\"7c60f09688abdca1\\""\n',
            },
        ],
    },
    placeInQueue: null,
    batchSpec: {
        applyURL: '/users/mrnugget/batch-changes/apply/QmF0Y2hTcGVjOiI5NzZxcXAydzBwYyI=',
    },
    initiator: {
        id: 'VXNlcjox',
        url: '/users/mrnugget',
        displayName: null,
    },
    namespace: {
        id: 'VXNlcjox',
        url: '/users/mrnugget',
        namespaceName: 'mrnugget',
    },
})

const batchSpecExecutionErrored = (): BatchSpecExecutionFields => ({
    id: '1234',
    inputSpec,
    createdAt: '2021-08-02T14:50:15Z',
    startedAt: '2021-08-02T14:50:16Z',
    finishedAt: '2021-08-02T14:50:22Z',
    failure: 'failed to perform src-cli step: command failed',
    state: BatchSpecExecutionState.ERRORED,
    steps: {
        setup: [
            {
                key: 'setup.firecracker.start',
                command: [
                    'ignite',
                    'run',
                    '--runtime',
                    'docker',
                    '--network-plugin',
                    'docker-bridge',
                    '--cpus',
                    '4',
                    '--memory',
                    '12G',
                    '--size',
                    '20G',
                    '--copy-files',
                    '/tmp/781490878:/work',
                    '--ssh',
                    '--name',
                    'USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3',
                    'sourcegraph/ignite-ubuntu:insiders',
                ],
                startTime: '2021-08-02T16:50:16+02:00',
                exitCode: 0,
                durationMilliseconds: 4889,
                out:
                    'stdout: time="2021-08-02T16:50:17+02:00" level=info msg="Created VM with ID \\"32cc4f205cd58550\\" and name \\"USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3\\""\nstdout: time="2021-08-02T16:50:18+02:00" level=info msg="Networking is handled by \\"docker-bridge\\""\nstdout: time="2021-08-02T16:50:18+02:00" level=info msg="Started Firecracker VM \\"32cc4f205cd58550\\" in a container with ID \\"e142627b331e3f0ff4fb2e0092c356fd8febd3cea9eb547b699e09c451d77ead\\""\nstdout: time="2021-08-02T16:50:18+02:00" level=info msg="Waiting for the ssh daemon within the VM to start..."\n',
            },
        ],
        srcPreview: {
            key: 'step.src.0',
            command: [
                'ignite',
                'exec',
                'USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3',
                '--',
                'cd /work && SRC_ENDPOINT=https://USERNAME_REMOVED:PASSWORD_REMOVED@sourcegraph.test:3443 SRC_ACCESS_TOKEN=SRC_ACCESS_TOKEN_REMOVED HOME=/home/mrnugget PATH=/home/mrnugget/google-cloud-sdk/bin:/home/mrnugget/bin:/home/mrnugget/.yarn/bin:/home/mrnugget/.config/yarn/global/node_modules/.bin:/usr/local/heroku/bin:/home/mrnugget/code/go/bin:/home/mrnugget/.asdf/shims:/usr/local/opt/asdf/bin:/usr/local/bin:/home/mrnugget/.cargo/bin:/home/mrnugget/.local/bin:/usr/local/sbin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/go/bin:/home/mrnugget/.fzf/bin src batch preview -f spec.yml -text-only -skip-errors -n mrnugget',
            ],
            startTime: '2021-08-02T16:50:21+02:00',
            exitCode: 1,
            durationMilliseconds: 157,
            out:
                'stdout: {"operation":"BATCH_SPEC_EXECUTION","timestamp":"2021-08-02T14:50:21.68Z","status":"FAILURE","message":"failed to query Sourcegraph version to check for available features: Post \\"https://USERNAME_REMOVED:***@sourcegraph.test:3443/.api/graphql\\": dial tcp: lookup sourcegraph.test on 192.168.1.1:53: no such host"}\nstdout: time="2021-08-02T16:50:21+02:00" level=error msg="Process exited with status 1\\n"\n',
        },
        teardown: [
            {
                key: 'teardown.firecracker.stop',
                command: ['ignite', 'stop', 'USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3'],
                startTime: '2021-08-02T16:50:21+02:00',
                exitCode: 0,
                durationMilliseconds: 701,
                out:
                    'stdout: time="2021-08-02T16:50:21+02:00" level=info msg="Removing the container with ID \\"e142627b331e3f0ff4fb2e0092c356fd8febd3cea9eb547b699e09c451d77ead\\" from the \\"docker-bridge\\" network"\nstdout: time="2021-08-02T16:50:22+02:00" level=info msg="Stopped VM with name \\"USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3\\" and ID \\"32cc4f205cd58550\\""\n',
            },
            {
                key: 'teardown.firecracker.remove',
                command: ['ignite', 'rm', '-f', 'USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3'],
                startTime: '2021-08-02T16:50:22+02:00',
                exitCode: 0,
                durationMilliseconds: 17,
                out:
                    'stdout: time="2021-08-02T16:50:22+02:00" level=info msg="Removed VM with name \\"USERNAME_REMOVED-1c25d857-837e-4d16-bfd6-12b9034fcad3\\" and ID \\"32cc4f205cd58550\\""\n',
            },
        ],
    },
    placeInQueue: null,
    batchSpec: null,
    initiator: {
        id: 'VXNlcjox',
        url: '/users/mrnugget',
        displayName: null,
    },
    namespace: {
        id: 'VXNlcjox',
        url: '/users/mrnugget',
        namespaceName: 'mrnugget',
    },
})

add('Completed', () => (
    <EnterpriseWebStory>
        {props => (
            <BatchSpecExecutionDetailsPage
                {...props}
                executionID="123123"
                fetchBatchSpecExecution={() => of(batchSpecExecutionCompleted())}
                expandStage="srcPreview"
            />
        )}
    </EnterpriseWebStory>
))

add('Errored', () => (
    <EnterpriseWebStory>
        {props => (
            <BatchSpecExecutionDetailsPage
                {...props}
                executionID="123123"
                fetchBatchSpecExecution={() => of(batchSpecExecutionErrored())}
                expandStage="srcPreview"
            />
        )}
    </EnterpriseWebStory>
))
